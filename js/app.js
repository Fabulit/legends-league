function printPlayerListAll(a){document.getElementById("playerList-Home").innerHTML="",$.each(a,function(a,t){var e=document.createElement("li");e.innerText=t.name,e.dataset.player=t.name,e.dataset.id=t.id,document.getElementById("playerList-Home").appendChild(e)}),$("#playerList-Home li").wrapInner("<strong></strong>"),$("#playerList-Home li strong").after('<span class="btn primary" data-action="rate" title="rate"></span><span class="btn primary" data-action="herocard" title="rate"></span><span class="btn secondary" data-action="erase" title="erase"></span>'),document.getElementById("playerList-Visitor").innerHTML="",$.each(a,function(a,t){var e=document.createElement("li");e.innerText=t.name,e.dataset.player=t.name,e.dataset.id=t.id,document.getElementById("playerList-Visitor").appendChild(e)}),$("#playerList-Visitor li").wrapInner("<strong></strong>"),$("#playerList-Visitor li strong").after('<span class="btn primary" data-action="rate" title="rate"></span><span class="btn primary" data-action="herocard" title="rate"></span><span class="btn secondary" data-action="erase" title="erase"></span>')}function loadPlayerListsReal(){$.ajax({url:"app/api.php/player",method:"GET"}).done(function(a){var t=JSON.parse(a);printPlayerListAll(t)})}
function printResultsAll(e){function t(){var e=$(".resultline");days={},e.each(function(){days[$(this).data("id")]=""});for(day in days)e.filter("[data-id="+day+"]").wrapAll('<ul class="result-list" />');$("#resultBlock .result-list").before('<h3 data-frontend="panel-headline-all" class="result-day-headline">Resultslist</h3>')}function a(){$("#resultBlock .result-list").first().prev('[data-frontend="panel-headline-all"]').addClass("arrow-direction"),$('#resultBlock [data-frontend="panel-headline-all"]').each(function(){var e=$(this).next(".result-list").find("li").last().data("id");$(this).text(e)})}document.getElementById("resultBlock").innerHTML="",$.each(e,function(e,t){var a=document.createElement("li");a.setAttribute("class","resultline");var l=document.createElement("div");l.setAttribute("class","game"),l.innerText=t.hostTeam;var n=document.createElement("div");n.innerText="vs";var s=document.createElement("div");s.setAttribute("class","game"),s.innerText=t.guestTeam;var d=document.createElement("div");d.setAttribute("class","gameresult"),d.innerText=t.host+":"+t.guest;var i=t.date,r=10,u=i.substring(0,r);a.dataset.id=u,a.appendChild(l),a.appendChild(n),a.appendChild(s),a.appendChild(d),document.getElementById("resultBlock").appendChild(a)}),t(),a()}function loadResults(){$.ajax({url:"app/api.php/resultsList",method:"GET"}).done(function(e){var t=JSON.parse(e);t.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),printResultsAll(t)})}loadResults();
function printTableResult(t){function e(){$("#tableResult tr").wrapAll("<tbody/>"),$("#tableResult tbody").wrapAll('<table id="tableResult-Table" style="display: none;"/>'),$("#tableResult-Table tbody").first().before(n)}function a(){$("#tableResult-Table").before('<h3 data-frontend="panel-headline-all">Results Only Table</h3>')}function l(){$("td.table-nation").each(function(){var t=$(this).text();$(this).addClass(t),$(this).text(""),$(this).append('<span class="flag"></span>')})}$.each(t,function(t,e){var a=document.createElement("tr"),l=document.createElement("td");l.setAttribute("class","table-rank"),l.innerText="1";var n=document.createElement("td");n.setAttribute("class","table-name"),n.innerText=e.name;var s=document.createElement("td");s.setAttribute("class","table-nation"),s.innerText=e.nationality;var i=document.createElement("td");i.setAttribute("class","table-points"),i.innerText=e.points;var r=document.createElement("td");r.setAttribute("class","table-goals"),r.innerText=e.goals+":"+e.goalsAgainst;var d=document.createElement("td");d.setAttribute("class","table-goals-dif"),d.innerText=e.goalsDiff;var o=document.createElement("td");o.setAttribute("class","table-strake"),o.innerText=e.wins;var c=document.createElement("td");c.setAttribute("class","table-strake"),c.innerText=e.draws;var b=document.createElement("td");b.setAttribute("class","table-strake"),b.innerText=e.losses,a.appendChild(l),a.appendChild(n),a.appendChild(s),a.appendChild(i),a.appendChild(r),a.appendChild(d),a.appendChild(o),a.appendChild(c),a.appendChild(b),tableResult.appendChild(a)});var n=$('<thead><tr><th title="Position"></th><th title="Player" class="table-name"></th><th title="Player" class="table-nation"></th><th title="Points" class="table-points">Pts</th><th title="Goals" class="table-goals">G</th><th title="Goal Difference" class="table-goals-dif">GD</th><th title="Wins" class="table-strake">W</th><th title="Draws" class="table-strake">D</th><th title="Losses" class="table-strake">L</th></tr></thead>');e(),a(),l()}function loadTableResult(){$.ajax({url:"app/api.php/resultsRanking",method:"GET"}).done(function(t){function e(){$("#tableResult-Table tr").each(function(t){$(this).find("td").first().each(function(){$(this).text(t)})})}var a=JSON.parse(t);a.sort(function(t,e){return t.points==e.points?parseFloat(e.goalsDiff)-parseFloat(t.goalsDiff):parseFloat(e.points)-parseFloat(t.points)}),printTableResult(a),e()})}function printTableRating(t){function e(){$("#tableRating tr").wrapAll("<tbody/>"),$("#tableRating tbody").wrapAll('<table id="tableRating-Table" style="display: none;"/>'),$("#tableRating-Table tbody").first().before(l)}function a(){$("#tableRating-Table").before('<h3 data-frontend="panel-headline-all">Rating Only Table</h3>')}$.each(t,function(t,e){var a=document.createElement("tr"),l=document.createElement("td");l.setAttribute("class","table-rank"),l.innerText="1";var n=document.createElement("td");n.setAttribute("class","table-name"),n.innerText=e.name;var s=document.createElement("td");s.setAttribute("class","table-skill"),s.innerText=e.technique;var i=document.createElement("td");i.setAttribute("class","table-skill"),i.innerText=e.tactic;var r=document.createElement("td");r.setAttribute("class","table-skill"),r.innerText=e.teamwork,a.appendChild(l),a.appendChild(n),a.appendChild(s),a.appendChild(i),a.appendChild(r),tableRating.appendChild(a)});var l=$('<thead><tr><th title="Position"></th><th title="Player" class="table-name"></th><th title="Player" class="table-skill">Technique</th><th title="Player" class="table-skill">Tactics</th><th title="Player" class="table-skill">Teamplay</th></tr></thead>');e(),a()}function loadTableRating(){$.ajax({url:"app/api.php/ratingsAVG",method:"GET"}).done(function(t){function e(){$("#tableRating-Table tr").each(function(t){$(this).find("td").first().each(function(){$(this).text(t)})})}var a=JSON.parse(t);printTableRating(a),e()})}function printTableCards(t){function e(){$("#tableCards tr").wrapAll("<tbody/>"),$("#tableCards tbody").wrapAll('<table id="tableCards-Table" style="display: none;"/>'),$("#tableCards-Table tbody").first().before(l)}function a(){$("#tableCards-Table").before('<h3 data-frontend="panel-headline-all">Cards Only Table</h3>')}$.each(t,function(t,e){var a=document.createElement("tr"),l=document.createElement("td");l.setAttribute("class","table-rank"),l.innerText="1";var n=document.createElement("td");n.setAttribute("class","table-name"),n.innerText=e.name;var s=document.createElement("td");s.setAttribute("class","table-cardweight"),s.setAttribute("data-card","cardweight");var i=Math.sqrt(e.cardCount),r=e.cardPointsAvg,d=i*r;s.innerText=d.toFixed(2);var o=document.createElement("td");o.setAttribute("class","table-cardavg");var r=e.cardPointsAvg;o.innerText=r.toFixed(2);var c=document.createElement("td");c.setAttribute("class","table-cardpoints"),c.innerText=e.cardPoints;var b=document.createElement("td");b.setAttribute("class","table-cardcount"),b.innerText=e.cardCount,a.appendChild(l),a.appendChild(n),a.appendChild(s),a.appendChild(o),a.appendChild(c),a.appendChild(b),tableCards.appendChild(a)});var l=$('<thead><tr><th title="Position"></th><th title="Player" class="table-name"></th><th title="Player" class="table-cardavg">Card Points</th><th title="Player" class="table-cardavg">Average Points</th><th title="Player" class="table-cardpoints">Total Points</th><th title="Player" class="table-cardcount">Total Amount</th></tr></thead>');e(),a()}function loadTableCards(){$.ajax({url:"app/api.php/cardsPerPlayer",method:"GET"}).done(function(t){function e(){for(var t=document.getElementById("tableCards-Table").getElementsByTagName("tbody").item(0),e=t.getElementsByTagName("tr"),a=0;a<e.length-1;a++)for(var l=0;l<e.length-(a+1);l++)parseInt(e.item(l).getElementsByClassName("table-cardweight").item(0).innerHTML)<parseInt(e.item(l+1).getElementsByClassName("table-cardweight").item(0).innerHTML)&&t.insertBefore(e.item(l+1),e.item(l))}function a(){$("#tableCards-Table tr").each(function(t){$(this).find("td").first().each(function(){$(this).text(t)})})}var l=JSON.parse(t);printTableCards(l),e(),a()})}function printTableTotal(t){function e(){$("#tableTotal tr").wrapAll("<tbody/>"),$("#tableTotal tbody").wrapAll('<table id="tableTotal-Table"/>'),$("#tableTotal-Table tbody").first().before(n)}function a(){$("#tableTotal-Table").before('<h3 data-frontend="panel-headline-all" class="arrow-direction">Super-Table</h3>')}function l(){$("td.table-nation").each(function(){var t=$(this).text();$(this).addClass(t),$(this).text(""),$(this).append('<span class="flag"></span>')})}$.each(t,function(t,e){var a=document.createElement("tr"),l=document.createElement("td");l.setAttribute("class","table-rank"),l.innerText="1";var n=document.createElement("td");n.setAttribute("class","table-name"),n.innerText=e.name;var s=document.createElement("td");s.setAttribute("class","table-nation"),s.innerText=e.nationality;var i=document.createElement("td");i.setAttribute("class","table-points");var r=e.points,d=e.wins,o=e.draws,c=e.losses,b=d+o+c,h=r/b,p=Math.sqrt(d),u=h*p*10;i.innerText=u.toFixed(2);var m=document.createElement("td");m.setAttribute("class","table-matches"),m.innerText=b;var T=document.createElement("td");T.setAttribute("class","table-cardweight");var f=Math.sqrt(e.cardCount),g=e.cardPointsAvg,C=f*g*5;T.innerText=C.toFixed(2);var v=document.createElement("td");v.setAttribute("class","table-superpoints"),v.setAttribute("data-total","superpoints"),v.innerText=(u+C).toFixed(2),a.appendChild(l),a.appendChild(n),a.appendChild(s),a.appendChild(v),a.appendChild(m),a.appendChild(i),a.appendChild(T),tableTotal.appendChild(a)});var n=$('<thead><tr><th title="Position"></th><th title="Player" class="table-name"></th><th title="Player" class="table-nation"></th><th title="Matches" class="table-strake">Points</th><th title="Matches" class="table-strake">Matches</th><th title="Points" class="table-points">Res-Pts</th><th title="Points" class="table-points">Card-Pts</th></tr></thead>');e(),a(),l()}function loadTableTotal(){$.ajax({url:"app/api.php/datablob",method:"GET"}).done(function(t){function e(){for(var t=document.getElementById("tableTotal-Table").getElementsByTagName("tbody").item(0),e=t.getElementsByTagName("tr"),a=0;a<e.length-1;a++)for(var l=0;l<e.length-(a+1);l++)parseInt(e.item(l).getElementsByClassName("table-superpoints").item(0).innerHTML)<parseInt(e.item(l+1).getElementsByClassName("table-superpoints").item(0).innerHTML)&&t.insertBefore(e.item(l+1),e.item(l))}function a(){$("#tableTotal-Table tr").each(function(t){$(this).find("td").first().each(function(){$(this).text(t)})})}var l=JSON.parse(t);printTableTotal(l),e(),a()})}loadTableResult(),loadTableRating(),loadTableCards(),loadTableTotal();
function printCardList(t){$.each(t,function(t,e){var a=document.createElement("input"),i=document.createElement("label"),n=document.createElement("img");n.src="cardimages/"+e.url,a.setAttribute("id","heorcard-"+e.id),a.setAttribute("type","radio"),a.setAttribute("name","heorcard"),a.dataset.card=e.id,a.dataset.name=e.name,document.getElementById("cards-scale").appendChild(a),document.getElementById("cards-scale").appendChild(i),i.appendChild(n)})}function loadCardListsReal(){$.ajax({url:"app/api.php/card",method:"GET"}).done(function(t){var e=JSON.parse(t);printCardList(e)})}$("[data-matchside]").on("click",'[data-player] [data-action="herocard"]',function(){function t(){$("#cards-scale-"+i),$(n).closest("li").next("li").next("li").find("#cards-scale").each(function(){this.id&&(this.id=this.id+"-"+i)}),$(n).closest("li").next("li").next("li").find(".cards-scale input").each(function(){this.id&&(this.id=this.id+"-"+i),this.name&&(this.name=this.name+"-"+i)}),$(n).closest("li").next("li").next("li").find(".cards-scale label").each(function(){$(this).attr("for",$(this).prev(":input").attr("id"))})}var e=$(this).parent().next("li"),a=$(this).parent().next("li.cards").length,i=$(this).parent().data("player"),n=$(this);$(this).hide(),0==a&&$.ajax({url:"snippets/cards.html",success:function(t){$(e).after(t)}}).done(function(t){setTimeout(loadCardListsReal,10)}),setTimeout(function(){$(e).next("li").show()},1e3),setTimeout(t,1e3)});
//# sourceMappingURL=app.js.map
